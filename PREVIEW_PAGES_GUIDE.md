# 📄 請求書・労働条件通知書プレビューページ

## 🎯 アクセス方法

### 請求書プレビュー
```
http://localhost:3000/preview/invoice
```

### 労働条件通知書プレビュー
```
http://localhost:3000/preview/work-notice
```

---

## 📋 機能

### 請求書プレビューページ

**URL:** `/preview/invoice`

**表示内容:**
- プラットフォーム手数料請求書のモック
- 実際のPDFと同じレイアウトをHTML/CSSで再現
- 印刷・PDF保存機能

**主な項目:**
- 請求書番号
- 発行日
- 宛先（薬局名）
- 請求内容（サービス利用料、手数料）
- 報酬総額と手数料（40%）の内訳
- お支払い情報（振込先、期限）
- 重要事項（個人情報開示条件、キャンセル警告）

### 労働条件通知書プレビューページ

**URL:** `/preview/work-notice`

**表示内容:**
- 労働条件通知書のモック
- 労働基準法第15条に準拠した内容
- 印刷・PDF保存機能

**主な項目:**
- 契約番号
- 発行日
- 雇用主情報（薬局名、所在地）
- 労働者情報（薬剤師名）
- 労働条件
  1. 契約期間
  2. 就業場所
  3. 業務内容
  4. 就業時間
  5. 休日
  6. 賃金（日給25,000円）
- 同意確認欄
- 法的注記

---

## 🎨 デザイン特徴

### 請求書

- **色分け:**
  - 青色: お支払い情報
  - 黄色: 重要事項（警告）
  - 赤色: 注意事項

- **レイアウト:**
  - A4サイズ対応
  - 印刷時に最適化
  - テーブル形式で見やすい内訳

### 労働条件通知書

- **色分け:**
  - 青色: 雇用主セクション
  - 緑色: 労働者セクション
  - オレンジ色: 賃金セクション（強調）
  - 各条項ごとに異なる左ボーダー色

- **レイアウト:**
  - A4サイズ対応
  - 印刷時に最適化
  - 見出しが明確で読みやすい

---

## 💡 使い方

### 1. ブラウザで開く

開発サーバーを起動して、以下のURLにアクセス:

```bash
npm run dev
```

- 請求書: http://localhost:3000/preview/invoice
- 労働条件通知書: http://localhost:3000/preview/work-notice

### 2. 印刷・PDF保存

#### 方法1: ページ内のボタンを使用

1. 「印刷・PDF保存」ボタンをクリック
2. 印刷プレビューが表示される
3. 「送信先」で「PDFに保存」を選択
4. 保存場所を指定して保存

#### 方法2: ブラウザの機能を使用

1. `Ctrl+P` (Windows) または `Cmd+P` (Mac)
2. 同様に「PDFに保存」を選択

### 3. 内容のカスタマイズ

サンプルデータは各ページのコンポーネント内で定義されています。

#### 請求書のデータ変更

```typescript:app/preview/invoice/page.tsx
const [invoiceData, setInvoiceData] = useState({
  invoiceNumber: 'INV-2026-0125-001',  // ← ここを変更
  pharmacyName: 'さくら薬局 渋谷店',  // ← ここを変更
  workDays: 30,                         // ← ここを変更
  // ... 他のフィールドも同様
});
```

#### 労働条件通知書のデータ変更

```typescript:app/preview/work-notice/page.tsx
const [noticeData, setNoticeData] = useState({
  contractNumber: 'CNT-2026-0125-001',  // ← ここを変更
  pharmacyName: 'さくら薬局 渋谷店',   // ← ここを変更
  pharmacistName: '山田 太郎',          // ← ここを変更
  // ... 他のフィールドも同様
});
```

---

## 📱 レスポンシブ対応

両ページとも以下のデバイスに対応:
- デスクトップ (推奨)
- タブレット
- モバイル（閲覧可能、印刷はデスクトップ推奨）

---

## 🖨️ 印刷時の動作

### 自動調整される要素

1. **非表示:**
   - ヘッダーのナビゲーションボタン
   - 「印刷・PDF保存」ボタン
   - ページ下部の説明セクション

2. **最適化:**
   - 余白を適切に設定（2cm）
   - 影とボーダーを調整
   - A4サイズに収まるように調整

---

## 🔄 実際のシステムとの連携

### プレビューページの目的

このプレビューページは**見本・確認用**です。実際のシステムでは:

1. **バックエンドでPDF生成**
   - `backend/src/utils/pdfGenerator.js` を使用
   - PDFKitライブラリで生成
   - データベースから動的にデータ取得

2. **自動発行**
   - 契約成立時に自動生成
   - メール送信
   - ダウンロードリンクを提供

3. **保存先**
   - 請求書: `backend/uploads/invoices/`
   - 労働条件通知書: `backend/uploads/work-notices/`

### プレビューページの利点

- ✅ デザインの確認が簡単
- ✅ クライアントへのプレゼンに最適
- ✅ レイアウト調整が容易
- ✅ 印刷イメージを事前確認
- ✅ データの見せ方を検討できる

---

## 🎨 カスタマイズ方法

### 色の変更

各ページの色は Tailwind CSS のクラスで定義されています:

```tsx
// 例: 請求書の重要事項ボックスの色を変更
<div className="bg-yellow-50 border-l-4 border-yellow-500">
  {/* yellow を red に変更すると赤色になる */}
</div>
```

### レイアウトの変更

各セクションは独立したdivで構成されているため、順序の入れ替えや削除が容易です。

### フォントサイズの変更

Tailwind CSSのテキストサイズクラスを使用:
- `text-xs`: 極小
- `text-sm`: 小
- `text-base`: 標準
- `text-lg`: 大
- `text-xl`: 特大

---

## ⚠️ 注意事項

### 1. 日本語フォント

ブラウザのデフォルトフォントを使用しているため、環境によって表示が異なる場合があります。

### 2. 印刷マージン

ブラウザの印刷設定で「マージン」を「標準」または「最小」に設定してください。

### 3. 背景色

一部のブラウザでは、印刷時に背景色が表示されない場合があります。
印刷設定で「背景のグラフィック」を有効にしてください。

---

## 📊 比較：プレビュー vs 実際のPDF

| 項目 | プレビューページ | 実際のPDF |
|------|----------------|----------|
| 生成方法 | HTML/CSS | PDFKit |
| データソース | 固定値（モック） | データベース |
| カスタマイズ | 容易 | 要コード変更 |
| 保存形式 | ブラウザ経由でPDF | 直接PDF |
| 日本語対応 | ブラウザ依存 | フォント設定必要 |
| 印刷品質 | 高 | 高 |

---

## 🚀 今後の拡張案

### 1. 動的データ入力フォーム

プレビューページに入力フォームを追加して、リアルタイムでデータを変更できるようにする。

### 2. テンプレート選択

複数のデザインテンプレートから選択できるようにする。

### 3. 言語切り替え

日本語/英語の切り替え機能を追加。

### 4. エクスポート機能

- PNG画像として保存
- HTML形式でダウンロード

---

## 📞 サポート

### 確認すべきこと

- [x] ページが正しく表示される
- [x] 印刷プレビューが正しい
- [x] PDFとして保存できる
- [x] データが正しく表示される
- [x] レイアウトが崩れていない

### 問題が発生した場合

1. ブラウザのキャッシュをクリア
2. 別のブラウザで試す
3. ブラウザのコンソールでエラーを確認

---

**作成日:** 2026年1月25日  
**ファイル:**
- `/app/preview/invoice/page.tsx`
- `/app/preview/work-notice/page.tsx`

