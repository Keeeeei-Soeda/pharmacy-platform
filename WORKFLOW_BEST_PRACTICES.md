# 🔄 開発ワークフロー ベストプラクティス

## ⚠️ 重要な注意事項

### 変更が失われる原因

1. **`git checkout` の実行**
   - `git checkout <ファイル名>` を実行すると、そのファイルの変更が失われます
   - 未コミットの変更は上書きされてしまいます

2. **ブランチの切り替え**
   - 未コミットの変更がある状態でブランチを切り替えると、変更が失われる可能性があります

3. **ファイルの上書き**
   - 別の実装をする際に、既存のファイルを上書きしてしまう可能性があります

---

## ✅ 推奨されるワークフロー

### 1. 実装完了後は必ずコミット

```bash
# 実装が完了したら、すぐにコミット
git add .
git commit -m "実装内容の説明"
```

### 2. 別の実装を始める前に確認

```bash
# 現在の変更を確認
git status

# 変更がある場合は、まずコミット
git add .
git commit -m "前の実装の完了"
```

### 3. 実装前の状態を保存（オプション）

```bash
# 現在の状態をブランチとして保存
git checkout -b feature/実装名
# 実装後
git commit -m "実装完了"
git checkout main
git merge feature/実装名
```

---

## 🛡️ 変更を保護する方法

### 方法1: 定期的にコミット（推奨）

- 実装が完了したら、すぐにコミット
- 小さな変更でもコミットをためらわない
- コミットメッセージは具体的に記述

### 方法2: Git Stash を使用

```bash
# 変更を一時保存
git stash

# 別の作業を行う

# 保存した変更を復元
git stash pop
```

### 方法3: ブランチを使用

```bash
# 新しいブランチを作成
git checkout -b feature/新機能

# 実装後、コミット
git add .
git commit -m "実装完了"

# mainブランチに戻ってマージ
git checkout main
git merge feature/新機能
```

---

## 📝 コミットメッセージの例

```
✨ 初回出勤日候補提示機能の実装完了

- 薬局側：メッセージ画面に日付候補提案ボタンを追加
- 薬剤師側：日付選択UIの実装と自動取得機能
- 日付選択後の正式オファー送信フローの実装
- バックエンド：構造化メッセージレスポンス形式の修正
```

---

## 🚨 もし変更が失われてしまった場合

### 方法1: Git Reflog で復元

```bash
# 最近の操作履歴を確認
git reflog

# 失われたコミットを復元
git checkout <コミットハッシュ>
```

### 方法2: IDEの履歴機能を使用

- VS Code / Cursor: `Cmd+Shift+P` → "Local History"
- ファイルの履歴から復元可能

---

## 💡 AIアシスタントへの依頼時の注意

AIアシスタントに以下を依頼する際は、**必ず事前にコミット**してください：

1. 「ファイルを元に戻して」
2. 「git checkout を実行して」
3. 「古いバージョンに戻して」

これらの操作は変更を失う可能性があります。

---

## ✅ チェックリスト

実装を始める前に：
- [ ] 現在の変更をコミット済みか確認
- [ ] `git status` で変更がないことを確認

実装完了後：
- [ ] 動作確認が完了したら、すぐにコミット
- [ ] コミットメッセージを具体的に記述
- [ ] `git log` でコミットが記録されていることを確認

別の実装を始める前に：
- [ ] 前の実装をコミット済みか確認
- [ ] `git status` で変更がないことを確認

