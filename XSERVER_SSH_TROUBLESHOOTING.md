# XServer SSH接続トラブルシューティング

## 🔍 現在のエラー

```
Not allowed at this time
Connection closed by 162.43.8.168 port 22
```

## ✅ 確認済み事項

- ✅ 鍵ファイルは存在: `~/.ssh/xs621921.key`
- ✅ 鍵ファイルの権限は正しい: `600`

## 🔧 確認が必要な事項

### 1. XServerのSSH設定画面で確認

XServerのSSH設定画面で以下を確認してください：

#### A. SSH設定が有効になっているか
- 「SSH設定」が「有効(ON)」になっているか確認
- 「無効(OFF)」になっている場合は「有効(ON)」に変更

#### B. 国外アクセス制限の設定
- 「国外アクセス制限」の設定を確認
- 日本国外からの接続を許可する必要がある場合は、制限を解除

#### C. 接続情報の確認
XServerのSSH設定画面に、以下のような接続情報が表示されているはずです：
- **接続先ホスト名**: （例：`sv16713.xserver.jp` または `yaku-navi.com`）
- **ポート番号**: （通常は `22` または別のポート）
- **ユーザー名**: （例：`xs621921` または `pharmacy`）

### 2. 接続コマンドの確認

XServerのSSH設定画面に表示されている接続情報に基づいて、正しいコマンドを使用してください。

#### パターン1: XServerのデフォルトユーザー名を使う場合
```bash
ssh -i ~/.ssh/xs621921.key xs621921@yaku-navi.com
```

#### パターン2: カスタムユーザー名を使う場合
```bash
ssh -i ~/.ssh/xs621921.key pharmacy@yaku-navi.com
```

#### パターン3: ポート番号が異なる場合
```bash
ssh -i ~/.ssh/xs621921.key -p ポート番号 xs621921@yaku-navi.com
```

### 3. XServerのSSH設定画面で表示されている接続例

XServerのSSH設定画面には、通常以下のような接続例が表示されています：

```
ssh -i ~/.ssh/xs621921.key xs621921@sv16713.xserver.jp
```

または

```
ssh xs621921@sv16713.xserver.jp
```

この接続例をそのまま使用してください。

---

## 🚀 次のステップ

1. **XServerのSSH設定画面を開く**
2. **接続情報を確認**（ホスト名、ユーザー名、ポート番号）
3. **SSH設定が「有効(ON)」になっているか確認**
4. **表示されている接続例をコピー**
5. **その接続例を使って接続テスト**

---

## 📝 接続情報の共有

XServerのSSH設定画面に表示されている以下の情報を共有してください：

- 接続先ホスト名
- ユーザー名
- ポート番号（22以外の場合）
- 接続例のコマンド

それに基づいて、正しい接続コマンドとデプロイスクリプトを修正します。

