# VPSサーバー情報まとめ

## 📋 サーバー基本情報

| 項目 | 値 |
|------|-----|
| **サーバー名** | pharmacy-platform |
| **IPアドレス** | 162.43.8.168 |
| **標準ホスト名** | x162-43-8-168.static.xvps.ne.jp |
| **OS** | Ubuntu 25.04 |
| **プラン** | VPS 4GB |
| **vCPU** | 4コア |
| **メモリ** | 6GB（無料増設オプション適用済み） |
| **ストレージ** | NVMe SSD 150GB |
| **UUID** | 4372dacf-be46-484f-9ec7-82745f6266c2 |
| **ステータス** | 通常（稼働中） |

---

## 🔑 パスワード情報

### VPSパネルパスワード
- **用途**: IPアドレスでVPSパネルにログインする際に使用
- **変更場所**: VPSパネル → アカウント → パスワード変更
- **注意**: 類推されやすいパスワードには変更できません

### SSH接続用パスワード
- **ユーザー名**: `pharmacy`
- **ホスト**: `yaku-navi.com` または `162.43.8.168`
- **認証方法**: SSH鍵認証（`~/.ssh/id_ed25519`）を使用中

### sudoパスワード
- **用途**: PM2自動起動設定の`sudo`コマンド実行時に必要
- **確認方法**: 
  1. VPSパネルパスワードと同じ可能性が高い
  2. または、サーバー作成時に設定したパスワード

---

## 🚀 PM2自動起動設定に必要な情報

### 接続情報
```bash
# SSH接続（SSH鍵認証）
ssh -i ~/.ssh/id_ed25519 pharmacy@yaku-navi.com
# または
ssh -i ~/.ssh/id_ed25519 pharmacy@162.43.8.168
```

### 実行コマンド
```bash
# 1. サーバーにSSH接続
ssh -i ~/.ssh/id_ed25519 pharmacy@yaku-navi.com

# 2. PM2自動起動設定を生成
cd ~/pharmacy-platform
pm2 save
pm2 startup systemd -u pharmacy --hp /home/pharmacy

# 3. 表示されたsudoコマンドを実行
# （パスワードが求められたら、VPSパネルパスワードまたはsudoパスワードを入力）
sudo env PATH=$PATH:/usr/bin /usr/lib/node_modules/pm2/bin/pm2 startup systemd -u pharmacy --hp /home/pharmacy
```

---

## 📝 確認事項

### 1. パスワードの確認
- **VPSパネルパスワード**: VPSパネル → アカウント → パスワード変更画面で確認可能
- **sudoパスワード**: VPSパネルパスワードと同じ可能性が高い

### 2. SSH接続の確認
現在、SSH鍵認証（`~/.ssh/id_ed25519`）を使用しているため、パスワードなしでSSH接続できます。

### 3. sudo権限の確認
`pharmacy`ユーザーがsudo権限を持っているか確認：
```bash
ssh -i ~/.ssh/id_ed25519 pharmacy@yaku-navi.com
sudo -l
```

---

## ⚙️ 現在の設定状況

### ✅ 設定済み
- SSH鍵認証（`~/.ssh/id_ed25519`）
- PM2プロセス管理
- Nginxリバースプロキシ
- アプリケーション（フロントエンド・バックエンド）

### ⚠️ 未設定
- PM2自動起動設定（サーバー再起動時に自動起動しない）

---

## 🎯 次のステップ

1. **VPSパネルパスワードを確認**
   - VPSパネル → アカウント → パスワード変更画面で現在のパスワードを確認
   - または、パスワード管理ツールで確認

2. **PM2自動起動設定を実行**
   - 上記のコマンドを実行
   - sudoパスワードが求められたら、VPSパネルパスワードを入力

3. **動作確認**
   - サーバー再起動後、PM2プロセスが自動起動することを確認

---

## 🔐 セキュリティ注意事項

- VPSパネルパスワードは安全な場所に保管してください
- 定期的にパスワードを変更することを推奨します
- 二段階認証の設定を検討してください（現在は未設定）

---

**最終更新**: 2026年1月25日

